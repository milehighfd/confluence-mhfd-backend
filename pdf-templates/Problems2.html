<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu:300,300i,400,400i,500,500i,700,700i&display=swap" rel="stylesheet">
    <title></title>
    <style>
    </style>
  </head>
  <body style="margin: 0; font-family: Ubuntu, sans-serif; width:1200px; padding-right: 40px;">
    <!-- HEAD TITLE -->
    <table width="1200px" FRAME="border" RULES="none">
      <thead style="min-height: 80px; border: hidden; border-spacing: 0px;">
        <tr>
          <th style="padding: 10px 20px; text-align:left; padding-bottom: 30px;">
            <h3 style="font-size: 21px; color: #11093c; line-height: 22px; margin: 0px 0px 7px 0px;">${problemname}</h3>
            <p style="font-size: 14px; color: #a09cb1; margin: 0; font-weight: 400;">
              <span>${problemtype}</span>&nbsp;&nbsp;•&nbsp;&nbsp;
              <span>${jurisdiction}</span>&nbsp;&nbsp;•&nbsp;&nbsp;
              <span>${county}</span>&nbsp;&nbsp;•&nbsp;&nbsp;
              <span>${servicearea}</span>
            </p>
          </th>
          <th style="padding: 10px 10px; width: 200px; padding-top: 0px;">
            <p style="font-size: 13px; color: #a09cb1;margin:0px 0ps 5px 0px; width: 100%; font-weight:400; text-align:left; margin-top: 0px;">
              Solution Status
              <b id='value_status' style="float: right; color: #251863;">${solutionstatus}%</b>
            </p>
            <div id='bar_id' style="background-color: #e7e8f6; height:6px; border-radius: 10px; border-left: 1px solid #11093c; display: block;"></div>
          </th>
          <th style="padding: 10px 20px; padding-right: 70px; padding-top: 0px;">
            <div style="font-size: 14px; color: #251863; border-left: 1.5px solid #3d2e8a12; padding: 8px 16px; margin: 8px 12px; text-align: initial; padding-right: 0px;">
              <p
              style="color: #a09cb1; font-size: 13px; font-weight: 400; text-align: initial; padding-bottom: 5px; margin: 0px;">
              Cost
            </p>
            <!-- <br/> -->
              ${solutioncost}
            </div>
          </th>
        </tr>
      </thead>
    </table>
   <!-- END HEAD TITLE -->

    <table width="1200px" FRAME="border" RULES="none">
      <tbody style="border: hidden">
        <tr>
          <td style="width: 848px; min-width:848px; max-width:850px; border-right: 1.5px solid #3d2e8a12;">
            <table style="border-spacing: 0px; text-align:center; margin: auto;">
              <tr>
                <td style="text-align:center;"><img src="${mainImage}" alt="" width="100%"></td>
              </tr>
            </table>

            <table style="border-spacing: 10px; padding: 10px 40px 0px 40px; font-size: 14px; text-align: left; width:100%;">
              <tr>
                <td style="width:20%; color:#11093c;"><i>Stream</i></td>
                <td style="width:30%; color:#11093c;">${streamname}</td>
                <td style="width:20%; color:#11093c;;"><i>Priority</i></td>
                <td style="width:30%; color:#11093c;">${problempriority}</td>
              </tr>
              <tr>
                <td style="width:20%; color:#11093c;;"><i>Source Name</i></td>
                <td style="width:30%; color:#11093c;">${sourcename}</td>
                <td style="width:20%; color:#11093c;;"><i>Source</i></td>
                <td style="width:30%; color:#11093c;">${source}</td>
              </tr>
              <tr>
                <td style="width:19.5%; color:#11093c;; vertical-align: top;"><i>Description</i></td>
                <td colspan="3" style="width:80%; color:#11093c;">
                  ${problemdescription}
                </td>
              </tr>
            </table>
            <!-- PROBLEM PARTS -->
            <table style="border-spacing: 10px; padding: 20px 40px 0px 40px; font-size: 14px; width:100%;">
              <tr>
                <td style="width: 20%; color: #11093c; font-size: 16px; font-weight: 700; text-align: left;">PROBLEM PARTS</td>
                <td style="width: 80%;"><div style="width: 100%; height: 1px; opacity: .1; background-color: #251863; margin: 12px 8px;"></div></td>
                <!-- <td style="width: 5%; text-align:right;"><img src="https://confluence.mhfd.org/Icons/icon-21.svg" alt=""/></td> -->
              </tr>
            </table>
            <table style="border-spacing: 0px 10px; padding: 0px 40px 0px 40px; font-size: 14px; width:100%;">
              <thead>
                <table style="border-spacing: 0px 10px; padding: 0px 40px 0px 40px; font-size: 14px; width: calc(100% - 13px); margin-left: 13px;">
                  <thead>
                    ${problempartRows}
                  </thead>
                </table>
            <!-- </table> -->
            <!-- END PROBLEM PARTS -->
            <!-- SOLUTION COMPONENTS -->
            <table style="border-spacing: 10px; padding: 20px 40px 0px 40px; font-size: 14px; width:100%;">
              <tr>
                <td style="width: 25%; color: #11093c; font-size: 16px; font-weight: 700; text-align: left;">PROPOSED ACTIONS</td>
                <td style="width: 75%;"><div style="width: 100%; height: 1px; opacity: .1; background-color: #251863; margin: 12px 8px;"></div></td>
                <!-- <td style="width: 5%; text-align:right;"><img src="https://confluence.mhfd.org/Icons/icon-21.svg" alt=""/></td> -->
              </tr>
            </table>
            <table style="border-spacing: 0px 10px; padding: 0px 40px 0px 40px; font-size: 14px; width: calc(100% - 13px); margin-left: 13px;">
              <thead>
                <!-- <tr>
                  <th width="30%" style="color: #251863; text-align: left; padding: 12px 20px; font-weight: 500; border-bottom: 1px solid #eae8f0;">Actions</th>
                  <th width="20%" style="color: #251863; text-align: left; padding: 12px 20px; font-weight: 500; border-bottom: 1px solid #eae8f0;">Cost</th>
                  <th width="20%" style="color: #251863; text-align: left; padding: 12px 20px; font-weight: 500; border-bottom: 1px solid #eae8f0;">% Complete</th>
                  <th width="30%" style="color: #251863; text-align: left; padding: 12px 20px; font-weight: 500; border-bottom: 1px solid #eae8f0;">% of Total Cost</th>
                </tr> -->
                ${componentRows}
              </thead>
              <!-- <tbody>
                ${componentRows}
              </tbody>-->
              ${totalEstimatedCost}
            </table>
            <!-- END SOLUTION COMPONENTS -->
            ${spaceBetween}
            <!-- MAP -->
            <div style="page-break-inside: avoid;">
              <table style="border-spacing: 10px; padding: 20px 40px 0px 40px; font-size: 14px; width:100%; page-break-inside: avoid;">
                <tr>
                  <td style="width: 10%; color: #11093c; font-size: 16px; font-weight: 700; text-align: left;">MAP</td>
                  <td style="width: 85%;"><div style="width: 100%; height: 1px; opacity: .1; background-color: #251863; margin: 12px 8px;"></div></td>
                  <!-- <td style="width: 5%; text-align:right;"><img src="https://confluence.mhfd.org/Icons/icon-21.svg" alt=""/></td> -->
                </tr>
                <tr>
                  <td style="text-align: center;"><img src="${map}" alt="" height="${mapHeight}px"></td>
                </tr>
              </table>
            </div>
            
            <!-- END MAP -->
          </td>

          <!-- COLLABORATORS AND COMMENTS -->
          <td style="vertical-align: top;">
            <table style="padding: 20px 25px 0px 25px;">
              <tr>
                <td><h3 style="font-size: 18px; color: #11093c; margin: 0px 0px 15px 0px; font-weight: bold;">TEAM</h3></td>
              </tr>
            </table>
            <table style="padding: 0px 25px 20px 25px; border-spacing: 0px; ">
             ${teamRow}
            </table>

          </td>
          <!-- END COLLABORATORS AND COMMENTS -->
        </tr>
      </tbody>
    </table>
  </body>
  <script>
    var valeStatusElement = document.getElementById('value_status');
    var solutionstatus = valeStatusElement.textContent;
    var solutionstatusSinUltimo = solutionstatus.slice(0, -1);
    var valueStatus =( Number(solutionstatusSinUltimo) * 250) / 100;
    var divElement = document.getElementById("bar_id");
    divElement.style.borderLeft = valueStatus + 'px solid #11093c';
  </script>
</html>
